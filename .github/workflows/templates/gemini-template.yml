name: Run Gemini CLI Template

on:
  workflow_dispatch:  # Manually trigger from Actions tab

jobs:
  run-gemini:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Run Gemini CLI
        id: gemini
        uses: google-github-actions/run-gemini-cli@v0.1.14
        with:
          gemini_api_key: ${{ secrets.GEMINI_API_KEY }}
          gemini_cli_version: 0.12.0-nightly.20251023.c4c0c0d1
          gemini_debug: true
          prompt: "YOUR_PROMPT_HERE"
          gemini_model: gemini-2.5-pro
          settings: |
            {
              "mcpServers": {
                "cospec": {
                  "httpUrl": "${{ vars.MCP_URL || 'YOUR_MCP_URL_HERE' }}",
                  "headers": {
                    "x-auth-header": "${{ secrets.COSPEC_API_TOKEN }}",
                    "Content-Type": "application/json"
                  },
                  "timeout": 5000
                }
              }
            }